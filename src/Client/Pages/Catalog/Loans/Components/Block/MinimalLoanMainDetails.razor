@if (Loan != default)
{
    @if (Loan.LoanLenders != default)
    {
        var loanLender = Loan.LoanLenders.Where(l => l.LoanId.Equals(Loan.Id) && l.LenderId.Equals(AppDataService.AppUser.Id)).FirstOrDefault() ?? default;
        <MudGrid>
            @if (loanLender != default)
            {
                if (loanLender.Product != default)
                {
                    <MudItem xs="6" Class="py-1">
                        <MudField InnerPadding="false" Label="Original amount" Variant="Variant.Outlined" Adornment="Adornment.Start" AdornmentIcon="@Icons.TwoTone.Money" IconSize="Size.Small"><MudText Typo="Typo.caption">@string.Format("{0:#,0.00}", loanLender.Product.Amount) @AppDataService.GetCurrency()</MudText></MudField>
                    </MudItem>
                }
            }

            <MudItem xs="6" md="3" Class="py-1">
                <MudField InnerPadding="false" Label="Month(s)" Variant="Variant.Outlined" Adornment="Adornment.Start" AdornmentIcon="@Icons.TwoTone.CalendarMonth" IconSize="Size.Small"><MudText Typo="Typo.caption">@Loan.Month</MudText></MudField>
            </MudItem>
            <MudItem xs="6" md="3" Class="py-1">
                <MudField InnerPadding="false" Label="Interest" Variant="Variant.Outlined" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Percent" IconSize="Size.Small"><MudText Typo="Typo.caption">@Loan.Interest</MudText></MudField>
            </MudItem>
            <MudItem xs="6" Class="py-1">
                <MudField InnerPadding="false" Label="Loan available" Variant="Variant.Outlined" Adornment="Adornment.Start" AdornmentIcon="@Icons.TwoTone.Today" IconSize="Size.Small"> <MudText Typo="Typo.caption">@string.Format("{0:dddd, MMMM d, yyyy}", Loan.StartOfPayment)</MudText></MudField>
            </MudItem>
            @if (Loan.IsCollateral)
            {
                if (!string.IsNullOrEmpty(Loan.InfoCollateral))
                {
                    <MudItem xs="6" Class="py-1">
                        <MudField InnerPadding="false" Label="Collateral" Variant="Variant.Outlined" Adornment="Adornment.Start" AdornmentIcon="@Icons.TwoTone.DevicesOther" IconSize="Size.Small"><MudText Typo="Typo.caption">@Loan.InfoCollateral</MudText></MudField>
                    </MudItem>
                }
            }
        </MudGrid>

    }
}

@code {
    [CascadingParameter(Name = "AppDataService")]
    public AppDataService AppDataService { get; set; } = default!;

    [Parameter]
    public LoanDto Loan { get; set; } = default!;
}
