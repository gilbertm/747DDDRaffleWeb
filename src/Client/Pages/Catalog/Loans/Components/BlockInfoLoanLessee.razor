@if (AppDataService.AppUser != default)
{
    if (Loan != default)
    {
        var clickableApplicantCSS = "";
        if (Loan.LoanLenders != default)
        {
            if (Loan.LoanLenders.Count > 0)
            {
                MyselfLender = Loan.LoanLenders.FirstOrDefault(ll => ll.LenderId.Equals(AppDataService.AppUser.Id)) ?? default!;

                if (MyselfLender != default)
                {
                    IsOwner = true;
                    clickableApplicantCSS = "cursor:pointer";
                }
            }
        }

        if (Loan.LoanLessees != default)
        {
            if (Loan.LoanLessees.Count > 0)
            {
                MyselfLessee = Loan.LoanLessees.FirstOrDefault() ?? default!;
            }
        }

        if (MyselfLessee != default)
        {
            if (MyselfLessee.Lessee != default)
            {
                if (!string.IsNullOrEmpty(AppDataService.AppUser.RoleName) && (new string[] { "Admin", "Lender", "Lessee" }).Contains(AppDataService.AppUser.RoleName))
                {
                    <MudGrid Spacing="2" Justify="Justify.Center">
                        <MudItem xs="12" md="12" Class="text-center">
                            <MudGrid Justify="Justify.Center">
                                <MudPaper Elevation="0" Class="mx-1 px-3 py-3 rounded-0">
                                    @if (string.IsNullOrEmpty(MyselfLessee.Lessee.ImageUrl))
                                    {
                                        MyselfLessee.Lessee.ImageUrl = Config[ConfigNames.ApiBaseUrl] + "Files/Images/ApplicationUser/Default/System - Basic Default - 480x270.jpg";
                                    }

                                    @* lessee, winner *@
                                    @if (MyselfLessee.LesseeId.Equals(AppDataService.AppUser.Id))
                                    {
                                        <MudText Typo="Typo.caption" Color="Color.Surface">@Loan.Status</MudText>
                                    }

                                    @* display only for admin or lender *@
                                    @if ((new string[] { "Admin", "Lender" }).Contains(AppDataService.AppUser.RoleName))
                                    {
                                        <MudText Typo="Typo.h5" Class="mt-4 mb-2" Color="Color.Surface">Lessee</MudText>
                                        <MudPaper Elevation="0" Style="@(clickableApplicantCSS)">
                                            <MudAvatar Image="@MyselfLessee.Lessee.ImageUrl" Alt="@MyselfLessee.Lessee.Id.ToString()" Size="Size.Large" />
                                            <MudHidden Breakpoint="Breakpoint.MdAndUp" Invert="true">
                                                <MudText Typo="Typo.body2" Color="Color.Primary">@MyselfLessee.Lessee.FirstName @MyselfLessee.Lessee.LastName</MudText>
                                                <MudText Typo="Typo.body2" Color="Color.Primary">@MyselfLessee.Lessee.Email</MudText>

                                                @if (!string.IsNullOrEmpty(MyselfLessee.Lessee.PhoneNumber))
                                                {
                                                    <MudText Typo="Typo.body2" Color="Color.Primary">@MyselfLessee.Lessee.PhoneNumber</MudText>
                                                }
                                            </MudHidden>
                                        </MudPaper>
                                    }
                                </MudPaper>
                            </MudGrid>
                        </MudItem>
                    </MudGrid>
                }
            }
        }
    }
}
